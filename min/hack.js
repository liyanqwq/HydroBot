(()=>{"use strict";var __webpack_modules__={4320:(module,__unused_webpack_exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);const fs_extra_1=__webpack_require__(4298),path_1=__webpack_require__(5622),tasks=[["koishi-core",2,["append","throw error2;","if (typeof error2 === 'string'){\n                session.user.usage[argv.command.name]--;\n                return session.send(error2);\n            }\n            session.send(error2.message);"]],["koishi-plugin-teach",3,["append","state.dialogue = dialogue;","\nsession._dialogue = dialogue;"],["replace",".toLowerCase().replace(/\\s+/g, '')",""],["replace","        if (index === 0)\n            message = message.replace(/^[()\\[\\]]*/, '');\n        if (index === arr.length - 1)\n            message = message.replace(/[\\.,?!()\\[\\]~]*$/, '');",""]],["gtoken/build/src/index",1,["append","responseType: 'json',","agent: require('https-proxy-agent')(global.proxy)"]],["koishi-plugin-genshin/src/plugins/abyss",1,["replace","Filter.id(top.avatar_id).name","(Filter.id(top.avatar_id)||{}).name"]]];async function hack(){console.log("Running Hack");for(const[filename,version,...changes]of tasks){let file;try{file=eval("require").resolve(filename)}catch(e){const name=filename.split("/")[0];file=eval("require").resolve(name).split(path_1.sep),file.pop(),file=`${file.join(path_1.sep)}${path_1.sep}${filename.split("/")[1]}`}let content=(0,fs_extra_1.existsSync)(file)?(0,fs_extra_1.readFileSync)(file).toString():"";if("string"==typeof version){(0,fs_extra_1.writeFileSync)(file,version);continue}const first=content.split("\n")[0],ver=parseInt(first.split("// Hacked v")[1],10);if(!(ver>=version)){for(const[e,r,n,t]of changes)if("replace"===e)content=content.replace(r,n);else if("replaceBetween"===e){const[e,a]=content.split(r),[,s]=a.split(n);content=e+r+t+n+s}else"append"===e?content=content.replace(r,r+n):"remove"===e&&(content=content.replace(r,""));content=`// Hacked v${version}\n${content}`,(0,fs_extra_1.writeFileSync)(file,content)}}}module.parent||hack(),module.exports=hack},4298:e=>{e.exports=require("fs-extra")},5622:e=>{e.exports=require("path")}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__=__webpack_require__(4320)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGFjay5qcyIsIm1hcHBpbmdzIjoiZ0pBQUEsMkNBQ0EsaUNBRU1BLE1BQW9ELENBQ3RELENBQ0ksY0FBZSxFQUNmLENBQ0ksU0FBVSxnQkFDVix1TUFPUixDQUNJLHNCQUF1QixFQUN2QixDQUFDLFNBQVUsNkJBQThCLG1DQUN6QyxDQUFDLFVBQVcsc0NBQXVDLElBQ25ELENBQUMsVUFBVyxpTUFHZ0QsS0FFaEUsQ0FDSSx5QkFBMEIsRUFDMUIsQ0FBQyxTQUFVLHdCQUF5QixzREFFeEMsQ0FDSSwwQ0FBMkMsRUFDM0MsQ0FBQyxVQUFXLGdDQUFpQyx5Q0FJckRDLGVBQWVDLE9BQ1hDLFFBQVFDLElBQUksZ0JBQ1osSUFBSyxNQUFPQyxTQUFVQyxXQUFZQyxXQUFZUCxNQUFPLENBQ2pELElBQUlRLEtBQ0osSUFFSUEsS0FBT0MsS0FBSyxXQUFXQyxRQUFRTCxVQUNqQyxNQUFPTSxHQUNMLE1BQU1DLEtBQU9QLFNBQVNRLE1BQU0sS0FBSyxHQUVqQ0wsS0FBT0MsS0FBSyxXQUFXQyxRQUFRRSxNQUFNQyxNQUFNLE9BQUFDLEtBQzNDTixLQUFLTyxNQUNMUCxLQUFPLEdBQUdBLEtBQUtRLEtBQUssT0FBQUYsT0FBTyxPQUFBQSxNQUFNVCxTQUFTUSxNQUFNLEtBQUssS0FFekQsSUFBSUksU0FBVSxhQUFBQyxZQUFXVixPQUFRLGFBQUFXLGNBQWFYLE1BQU1ZLFdBQWEsR0FDakUsR0FBdUIsaUJBQVpkLFFBQXNCLEVBQzdCLGFBQUFlLGVBQWNiLEtBQU1GLFNBQ3BCLFNBRUosTUFBTWdCLE1BQVFMLFFBQVFKLE1BQU0sTUFBTSxHQUM1QlUsSUFBTUMsU0FBU0YsTUFBTVQsTUFBTSxlQUFlLEdBQUksSUFDcEQsS0FBSVUsS0FBT2pCLFNBQVgsQ0FDQSxJQUFLLE1BQU9tQixFQUFNQyxFQUFNQyxFQUFNQyxLQUFTckIsUUFDbkMsR0FBYSxZQUFUa0IsRUFDQVIsUUFBVUEsUUFBUVksUUFBUUgsRUFBTUMsUUFDN0IsR0FBYSxtQkFBVEYsRUFBMkIsQ0FDbEMsTUFBT0ssRUFBUUMsR0FBT2QsUUFBUUosTUFBTWEsSUFDN0IsQ0FBRU0sR0FBU0QsRUFBSWxCLE1BQU1jLEdBQzVCVixRQUFVYSxFQUFTSixFQUFPRSxFQUFPRCxFQUFPSyxNQUN4QixXQUFUUCxFQUNQUixRQUFVQSxRQUFRWSxRQUFRSCxFQUFNQSxFQUFPQyxHQUN2QixXQUFURixJQUNQUixRQUFVQSxRQUFRWSxRQUFRSCxFQUFNLEtBR3hDVCxRQUFVLGNBQWNYLFlBQVlXLFdBQ3BDLGFBQUFJLGVBQWNiLEtBQU1TLFdBTXZCZ0IsT0FBT0MsUUFBUWhDLE9BRnBCLGVBQVNBLE0sU0MxRVQrQixFQUFPRSxRQUFVQyxRQUFRLGEsU0NBekJILEVBQU9FLFFBQVVDLFFBQVEsVUNDckJDLHlCQUEyQixHQUcvQixTQUFTQyxvQkFBb0JDLEdBRTVCLElBQUlDLEVBQWVILHlCQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFMLFFBR3JCLElBQUlGLEVBQVNJLHlCQUF5QkUsR0FBWSxDQUNqREcsR0FBSUgsRUFDSkksUUFBUSxFQUNSUixRQUFTLElBVVYsT0FOQVMsb0JBQW9CTCxHQUFVTixFQUFRQSxFQUFPRSxRQUFTRyxxQkFHdERMLEVBQU9VLFFBQVMsRUFHVFYsRUFBT0UsUUN4QmZHLG9CQUFvQk8sSUFBT1osSUFDMUJBLEVBQU9hLE1BQVEsR0FDVmIsRUFBT2MsV0FBVWQsRUFBT2MsU0FBVyxJQUNqQ2QsR0NBUixJQUFJZSxvQkFBc0JWLG9CQUFvQixPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaHlkcm8tYm90Ly4vc3JjL2hhY2sudHMiLCJ3ZWJwYWNrOi8vaHlkcm8tYm90L2V4dGVybmFsIFwiZnMtZXh0cmFcIiIsIndlYnBhY2s6Ly9oeWRyby1ib3QvZXh0ZXJuYWwgXCJwYXRoXCIiLCJ3ZWJwYWNrOi8vaHlkcm8tYm90L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2h5ZHJvLWJvdC93ZWJwYWNrL3J1bnRpbWUvbm9kZSBtb2R1bGUgZGVjb3JhdG9yIiwid2VicGFjazovL2h5ZHJvLWJvdC93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhpc3RzU3luYywgcmVhZEZpbGVTeW5jLCB3cml0ZUZpbGVTeW5jIH0gZnJvbSAnZnMtZXh0cmEnO1xuaW1wb3J0IHsgc2VwIH0gZnJvbSAncGF0aCc7XG5cbmNvbnN0IHRhc2tzOiBbc3RyaW5nLCBudW1iZXIgfCBzdHJpbmcsIC4uLnN0cmluZ1tdW11dW10gPSBbXG4gICAgW1xuICAgICAgICAna29pc2hpLWNvcmUnLCAyLFxuICAgICAgICBbXG4gICAgICAgICAgICAnYXBwZW5kJywgJ3Rocm93IGVycm9yMjsnLFxuICAgICAgICAgICAgYGlmICh0eXBlb2YgZXJyb3IyID09PSAnc3RyaW5nJyl7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbi51c2VyLnVzYWdlW2FyZ3YuY29tbWFuZC5uYW1lXS0tO1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXNzaW9uLnNlbmQoZXJyb3IyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlc3Npb24uc2VuZChlcnJvcjIubWVzc2FnZSk7YCxcbiAgICAgICAgXSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgJ2tvaXNoaS1wbHVnaW4tdGVhY2gnLCAzLFxuICAgICAgICBbJ2FwcGVuZCcsICdzdGF0ZS5kaWFsb2d1ZSA9IGRpYWxvZ3VlOycsICdcXG5zZXNzaW9uLl9kaWFsb2d1ZSA9IGRpYWxvZ3VlOyddLFxuICAgICAgICBbJ3JlcGxhY2UnLCBcIi50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xcXFxzKy9nLCAnJylcIiwgJyddLFxuICAgICAgICBbJ3JlcGxhY2UnLCBgICAgICAgICBpZiAoaW5kZXggPT09IDApXG4gICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5yZXBsYWNlKC9eWygpXFxcXFtcXFxcXV0qLywgJycpO1xuICAgICAgICBpZiAoaW5kZXggPT09IGFyci5sZW5ndGggLSAxKVxuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZSgvW1xcXFwuLD8hKClcXFxcW1xcXFxdfl0qJC8sICcnKTtgLCAnJ10sXG4gICAgXSxcbiAgICBbXG4gICAgICAgICdndG9rZW4vYnVpbGQvc3JjL2luZGV4JywgMSxcbiAgICAgICAgWydhcHBlbmQnLCBcInJlc3BvbnNlVHlwZTogJ2pzb24nLFwiLCBcImFnZW50OiByZXF1aXJlKCdodHRwcy1wcm94eS1hZ2VudCcpKGdsb2JhbC5wcm94eSlcIl0sXG4gICAgXSxcbiAgICBbXG4gICAgICAgICdrb2lzaGktcGx1Z2luLWdlbnNoaW4vc3JjL3BsdWdpbnMvYWJ5c3MnLCAxLFxuICAgICAgICBbJ3JlcGxhY2UnLCAnRmlsdGVyLmlkKHRvcC5hdmF0YXJfaWQpLm5hbWUnLCAnKEZpbHRlci5pZCh0b3AuYXZhdGFyX2lkKXx8e30pLm5hbWUnXSxcbiAgICBdLFxuXTtcblxuYXN5bmMgZnVuY3Rpb24gaGFjaygpIHtcbiAgICBjb25zb2xlLmxvZygnUnVubmluZyBIYWNrJyk7XG4gICAgZm9yIChjb25zdCBbZmlsZW5hbWUsIHZlcnNpb24sIC4uLmNoYW5nZXNdIG9mIHRhc2tzKSB7XG4gICAgICAgIGxldCBmaWxlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWV2YWxcbiAgICAgICAgICAgIGZpbGUgPSBldmFsKCdyZXF1aXJlJykucmVzb2x2ZShmaWxlbmFtZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBmaWxlbmFtZS5zcGxpdCgnLycpWzBdO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWV2YWxcbiAgICAgICAgICAgIGZpbGUgPSBldmFsKCdyZXF1aXJlJykucmVzb2x2ZShuYW1lKS5zcGxpdChzZXApO1xuICAgICAgICAgICAgZmlsZS5wb3AoKTtcbiAgICAgICAgICAgIGZpbGUgPSBgJHtmaWxlLmpvaW4oc2VwKX0ke3NlcH0ke2ZpbGVuYW1lLnNwbGl0KCcvJylbMV19YDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29udGVudCA9IGV4aXN0c1N5bmMoZmlsZSkgPyByZWFkRmlsZVN5bmMoZmlsZSkudG9TdHJpbmcoKSA6ICcnO1xuICAgICAgICBpZiAodHlwZW9mIHZlcnNpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB3cml0ZUZpbGVTeW5jKGZpbGUsIHZlcnNpb24pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlyc3QgPSBjb250ZW50LnNwbGl0KCdcXG4nKVswXTtcbiAgICAgICAgY29uc3QgdmVyID0gcGFyc2VJbnQoZmlyc3Quc3BsaXQoJy8vIEhhY2tlZCB2JylbMV0sIDEwKTtcbiAgICAgICAgaWYgKHZlciA+PSB2ZXJzaW9uKSBjb250aW51ZTtcbiAgICAgICAgZm9yIChjb25zdCBbdHlwZSwgYXJnMCwgYXJnMSwgYXJnMl0gb2YgY2hhbmdlcykge1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdyZXBsYWNlJykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoYXJnMCwgYXJnMSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyZXBsYWNlQmV0d2VlbicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBbYmVmb3JlLCBtaWRdID0gY29udGVudC5zcGxpdChhcmcwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBbLCBhZnRlcl0gPSBtaWQuc3BsaXQoYXJnMSk7XG4gICAgICAgICAgICAgICAgY29udGVudCA9IGJlZm9yZSArIGFyZzAgKyBhcmcyICsgYXJnMSArIGFmdGVyO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnYXBwZW5kJykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoYXJnMCwgYXJnMCArIGFyZzEpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncmVtb3ZlJykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoYXJnMCwgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnRlbnQgPSBgLy8gSGFja2VkIHYke3ZlcnNpb259XFxuJHtjb250ZW50fWA7XG4gICAgICAgIHdyaXRlRmlsZVN5bmMoZmlsZSwgY29udGVudCk7XG4gICAgfVxufVxuXG5leHBvcnQgPSBoYWNrO1xuXG5pZiAoIW1vZHVsZS5wYXJlbnQpIGhhY2soKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImZzLWV4dHJhXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInBhdGhcIik7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0bG9hZGVkOiBmYWxzZSxcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG5cdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5ubWQgPSAobW9kdWxlKSA9PiB7XG5cdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdHJldHVybiBtb2R1bGU7XG59OyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MzIwKTtcbiJdLCJuYW1lcyI6WyJ0YXNrcyIsImFzeW5jIiwiaGFjayIsImNvbnNvbGUiLCJsb2ciLCJmaWxlbmFtZSIsInZlcnNpb24iLCJjaGFuZ2VzIiwiZmlsZSIsImV2YWwiLCJyZXNvbHZlIiwiZSIsIm5hbWUiLCJzcGxpdCIsInNlcCIsInBvcCIsImpvaW4iLCJjb250ZW50IiwiZXhpc3RzU3luYyIsInJlYWRGaWxlU3luYyIsInRvU3RyaW5nIiwid3JpdGVGaWxlU3luYyIsImZpcnN0IiwidmVyIiwicGFyc2VJbnQiLCJ0eXBlIiwiYXJnMCIsImFyZzEiLCJhcmcyIiwicmVwbGFjZSIsImJlZm9yZSIsIm1pZCIsImFmdGVyIiwibW9kdWxlIiwicGFyZW50IiwiZXhwb3J0cyIsInJlcXVpcmUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJpZCIsImxvYWRlZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJubWQiLCJwYXRocyIsImNoaWxkcmVuIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJzb3VyY2VSb290IjoiIn0=